# Video Prompt Pipeline

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è AI-–≤–∏–¥–µ–æ —Å–∏—Å—Ç–µ–º –∏–∑ –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–≤.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

**–û–¥–∏–Ω —Ñ–∞–π–ª –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ–≥–æ:**
```bash
START.bat
```

–≠—Ç–æ—Ç —Ñ–∞–π–ª:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç .env
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã–π —Å–µ—Ä–≤–µ—Ä
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –æ–±–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

## üìã –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### 1. –ê–Ω–∞–ª–∏–∑ –≤–∏–¥–µ–æ/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∏–¥–µ–æ –∏–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- –ü–æ–ª—É—á–∏—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
- –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –ø—Ä–æ–º–ø—Ç –¥–ª—è Veo 3, Sora 2, Seedream

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** `web_interface.html` –∏–ª–∏ `http://localhost:8000/ui`

### 2. Veo 3.1 - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ –ø–æ –æ–±—Ä–∞–∑—Ü–∞–º
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ 3 —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –≤–∏–¥–µ–æ-—Ä–µ—Ñ–µ—Ä–µ–Ω—Å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ ‚Üí –ø—Ä–æ–º–ø—Ç ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** `veo31_interface.html` –∏–ª–∏ `http://localhost:8000/veo31`

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
video-prompt-pipeline/
‚îú‚îÄ‚îÄ START.bat                    # –ï–¥–∏–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ
‚îú‚îÄ‚îÄ fix_env.py                   # –ü—Ä–æ–≤–µ—Ä–∫–∞ .env
‚îú‚îÄ‚îÄ api_server.py                # –ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ pipeline.py                  # –û—Å–Ω–æ–≤–Ω–æ–π –ø–∞–π–ø–ª–∞–π–Ω
‚îú‚îÄ‚îÄ agent1_visual_analyzer.py    # –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä
‚îú‚îÄ‚îÄ agent2_prompt_generator.py   # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–æ–º–ø—Ç–æ–≤
‚îú‚îÄ‚îÄ veo31_client.py              # –ö–ª–∏–µ–Ω—Ç Veo 3.1 API
‚îú‚îÄ‚îÄ veo31_generator.py           # Veo 3.1 workflow
‚îú‚îÄ‚îÄ web_interface.html           # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–Ω–∞–ª–∏–∑–∞
‚îú‚îÄ‚îÄ veo31_interface.html          # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Veo 3.1
‚îú‚îÄ‚îÄ .env                         # API –∫–ª—é—á–∏ (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å!)
‚îú‚îÄ‚îÄ requirements.txt              # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ README.md                     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª:
```
OPENAI_API_KEY=–≤–∞—à-–∫–ª—é—á
GEMINI_API_KEY=–≤–∞—à-–∫–ª—é—á
USE_GEMINI=false
PORT=8000
# –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ: –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É, –≥–¥–µ –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏—è workflow
# WORKFLOW_STATE_PATH=./data/workflow_states.json
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
START.bat
```

## üåê API Endpoints

### –ê–Ω–∞–ª–∏–∑:
- `POST /process` - –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ + –ø—Ä–æ–º–ø—Ç
- `POST /analyze` - –¢–æ–ª—å–∫–æ –∞–Ω–∞–ª–∏–∑
- `POST /generate` - –¢–æ–ª—å–∫–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–∞

### Veo 3.1:
- `POST /veo31/generate` - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- `POST /veo31/generate-from-urls` - –ß–µ—Ä–µ–∑ URL
- `GET /veo31/status/{task_id}` - –°—Ç–∞—Ç—É—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- `GET /veo31/kie-status/{task_id}` - –°—Ç–∞—Ç—É—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Kie.ai
- `POST /veo31/analyze-and-prompt` - –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–∞
- `POST /veo31/generate-with-prompt` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ –ø–æ –ø—Ä–æ–º–ø—Ç—É –∏ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- `GET /workflow/{workflow_id}` - –ü–æ–ª—É—á–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–∏–¥–µ–æ+–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ workflow
- `GET /workflow/{workflow_id}/status` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –ø–æ–ª—É—á–∏—Ç—å `video_url`, –∫–æ–≥–¥–∞ –≤–∏–¥–µ–æ –≥–æ—Ç–æ–≤–æ

## üóÑÔ∏è –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π workflow

- –í—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è `VideoImagePromptWorkflow` —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ JSON-—Ñ–∞–π–ª–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `workflow_states.json` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞).
- –ü—É—Ç—å –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `WORKFLOW_STATE_PATH`.
- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.
- –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Å—Ç–∞–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –≤ Kie.ai. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å —á–µ—Ä–µ–∑ `GET /workflow/{workflow_id}/status`.
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ `GET /workflow/{workflow_id}/status` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Ç–æ–≥–æ–≤—ã–π `video_url` –∏ —É–¥–∞–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (–ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤–µ—Ä–Ω—É—Ç 404).

## üìù –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
–ó–∞–ø—É—Å—Ç–∏—Ç–µ `START.bat` –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–∫—Ä—ã–≤—à–∏–µ—Å—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã.

### –í–∞—Ä–∏–∞–Ω—Ç 2: API
```bash
curl -X POST "http://localhost:8000/process" \
  -F "url=https://example.com/video.mp4" \
  -F "platform=veo3" \
  -F "use_case=product_video"
```

## üîß Troubleshooting

**–°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª: `python fix_env.py`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ—Ä—Ç 8000 —Å–≤–æ–±–æ–¥–µ–Ω

**–û—à–∏–±–∫–∞ "API key –Ω–µ –Ω–∞–π–¥–µ–Ω":**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

**Veo 3.1 –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `GEMINI_API_KEY` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ endpoint –≤ `veo31_client.py` (–º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `VEO31_README.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ Veo 3.1
- `README.md` - –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- `.env` —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç API –∫–ª—é—á–∏ - –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –≤ git
- Veo 3.1 API endpoint –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
